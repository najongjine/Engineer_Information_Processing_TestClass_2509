DDL-
테이블 생성, 테이블 변경, 테이블 삭제하기

CREATE TABLE t_departments (
  dept_id INT PRIMARY KEY,
  dept_name VARCHAR(50)
);

CREATE TABLE t_employees (
  emp_id INT PRIMARY KEY,
  name VARCHAR(50),
  dept_id INT,
  CONSTRAINT t_departments_fk
  FOREIGN KEY (dept_id)
    REFERENCES t_departments(dept_id)
    ON DELETE CASCADE   -- 여기서 동작이 갈림!
);
FK 맺는게 드럽ㄱ세 어려워요
CONSTRAINT t_departments_fk 는 FK 의 이름.
이 이름이 있어야 나중에 FK 해지를 할수가 있어요

FOREIGN KEY (dept_id) 이건 t_employees 테이블에서 어떤 칼럼을 FK로 쓸거냐

REFERENCES t_departments(dept_id) 이건 부모 테이블이 뭐고, 부모테이블에서 PK가 뭐냐

 ON DELETE CASCADE 이건 부모 테이블 데이터가 삭제되면, 자식 테이블은 어떻게 할래?

 CASCADE(연쇄작용) 부모가 지워지면 자식도 같이



CREATE TABLE t_test1 (
  id INT PRIMARY KEY,
  str VARCHAR(50) DEFAULT '' UNIQUE NOT NULL
);

-- 칼럼 삭제
ALTER TABLE t_test1 DROP COLUMN str;

-- 테이블에 칼럼 추가
ALTER TABLE t_test1 ADD price INT;

-- 인덱스 생성
CREATE INDEX idx_price ON t_test1(price);

-- 인덱스 지우기
ALTER TABLE t_test1 DROP INDEX idx_price;

idx_price : 인덱스 이름
t_test1 : 테이블 이름
price : 적용할 칼럼 이름

-- view 생성하기
CREATE VIEW v_all_employees_info AS
SELECT 
    e.dept_id,
    dept_name,
    emp_id,
    name
FROM t_departments as d
LEFT JOIN t_employees as e ON e.dept_id = d.dept_id;

SELECT * FROM v_all_employees_info;

view 는 개념 스키마에 속합니다.
외부 사용자에게 필요한것만 보여줍니다.
진짜 테이블은 아니어서, 데이터 추가와 삭제는 할수 없습니다

SELECT 쿼리를 짤때 1000줄 넘어가면 눈돌아가서 view 만들면 한줄 컷 됩니다.


-- view 를 삭제
DROP VIEW v_all_employees_info;