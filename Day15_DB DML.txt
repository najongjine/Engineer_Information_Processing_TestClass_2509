-- Departments 테이블 생성
CREATE TABLE Departments (
    department_id INT PRIMARY KEY,
    dept_name VARCHAR(100) NOT NULL UNIQUE COMMENT '부서명',
    location VARCHAR(100) COMMENT '지역'
);

-- Employees 테이블 생성
CREATE TABLE Employees (
    emp_id INT PRIMARY KEY,
    emp_name VARCHAR(100) NOT NULL COMMENT '이름',
    department_id INT COMMENT '부서ID (FK)',
    hire_date DATE COMMENT '입사일',
    salary DECIMAL(10, 2) COMMENT '연봉',
    job_title VARCHAR(100) COMMENT '직무',
    
    -- 외래 키 설정: Employees.department_id -> Departments.department_id
    FOREIGN KEY (department_id) REFERENCES Departments(department_id)
        ON DELETE SET NULL  -- 부서가 삭제되면 직원의 department_id를 NULL로 설정
        ON UPDATE CASCADE   -- 부서 ID가 변경되면 직원 테이블에도 반영
);

-- Projects 테이블 생성
CREATE TABLE Projects (
    project_id INT PRIMARY KEY,
    project_name VARCHAR(100) NOT NULL COMMENT '프로젝트명',
    dept_id INT COMMENT '부서ID (FK)',
    start_date DATE COMMENT '시작일',
    end_date DATE COMMENT '종료일',
    budget DECIMAL(15, 2) COMMENT '예산',
    
    -- 외래 키 설정: Projects.dept_id -> Departments.department_id
    FOREIGN KEY (dept_id) REFERENCES Departments(department_id)
        ON DELETE CASCADE   -- 부서가 삭제되면 해당 부서의 프로젝트도 삭제
        ON UPDATE CASCADE   -- 부서 ID가 변경되면 프로젝트 테이블에도 반영
);



-- 흑백 화면에서 test2 데이터베이스 선택하기
USE test2;



